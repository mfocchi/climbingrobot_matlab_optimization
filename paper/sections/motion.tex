The motion plan for the robot is decided solving an optimal control problem \emph{a la} Pondryagin.
Generally speaking, we can set up the problem in the following way:
\begin{equation}
  \begin{aligned}
    &\text{min}_{\vect{u}(t)} l\left(\vect{x}(t),\vect{u}(t)\right)\\
    &\text{subj. to}\\
    &\,\,\dot{\vect{x}} = f(\vect{x},\vect{u})\\
    &\,\,\vect{u} \in \mathcal{U}\\
    &\,\,\vect{x} \in \mathcal{X}\\
    &\,\,\vect{x}(t_0) = \vect{x}_0, \vect{x}(t_f)=\vect{x}_f.
  \end{aligned}
\end{equation}
where $\vect{x}$ are the state variables, $\vect{u}$ are the input variables, $f(\cdot,\cdot)$ is the dynamic equation of the system,
$\mathcal{U}$ is set of admissible input values, $\mathcal{X}$ is the set of admissible states, $t_0$ and $t_f$ are the initial and final
instants ($t_f$ can also be an optimisation variable) and $\vect{x}_0$ and $\vect{x}_f$ are the desired initial and final states.
The state $\vect{x}$ is in this our problem composed by
$\vect{x}^T = \left[\theta,\,\phi,\,l,\,\dot{\theta},\,\dot{\phi},\, \dot{l}\right]^T$, while the command variables are
given by $\vec{u}^T = \left[\vect{F}_u,\,\vect{F}_t\right]^T$. The dynamic equation is derived from~\eqref{eq:nonlinearDyn}:
\begin{equation}
  \begin{aligned}
    \dot{\begin{bmatrix}
      x_1\\x_2 \\x_3\\x_4\\x_5\\x_6\end{bmatrix}} = \begin{bmatrix}
      x_4\\
      x_5\\ x_6 \\  - \frac{2}{x_3} \dot{x_1} \dot{x_3} + c_{x_1} s_{x_1}  \dot{x_2}^2 - \frac{g}{x_3}  s_{x_1} +  \frac{1}{mx_3}F_{u,n}\\
      - 2 \frac{c_{x_1}}{s_{x_1}} \dot{x_1} \dot{x_2} - \frac{2}{x_3} \dot{x_2} \dot{x_3} + \frac{1}{mx_3 s_{x_1}} F_{u,t}\\
      x_3 \dot{x_1}^2 + x_3 s^2{x_1}\dot{x_2}^2+g c_{x_1}+\frac{1}{m}F_r .
      \end{bmatrix}
  \end{aligned}
\end{equation}
The terminal constraints are usually expressed in the cartesian space $[x,y.z]$, and can be expressed in as a function of
the state variables using ~\eqref{eq1}:
\begin{equation}
  \begin{aligned}
    x(t_0) = x_3(t_0) s_{x_1(t_0)} c_{x_2(t_0)},  &\,\,x(t_f) = x_3(t_f) s_{x_1(t_f)} c_{x_2(t_f)}\\
    y(t_0) = x_3(t_0) s_{x_1(t_0)} s_{x_2(t_0)}, &\,\,y(t_f) = x_3(t_f) s_{x_1(t_f)} s_{x_2(t_f)}\\
    z(t_0) = -x_3(t_0) c_{x_1(t_0)}, &\,\, z(t_f) = -x_3(t_f) c_{x_1(t_f)} 
  \end{aligned}
\end{equation}




%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../icra22climb"
%%% End:
